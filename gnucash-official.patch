diff -up gnucash-3.0/libgnucash/core-utils/CMakeLists.txt.cow gnucash-3.0/libgnucash/core-utils/CMakeLists.txt
--- gnucash-3.0/libgnucash/core-utils/CMakeLists.txt.cow	2018-04-03 20:51:58.065871864 -0400
+++ gnucash-3.0/libgnucash/core-utils/CMakeLists.txt	2018-04-03 20:55:00.241511721 -0400
@@ -48,7 +48,7 @@ endif()
 configure_file(gncla-dir.h.in gncla-dir.h)
 
 ### Create gnc-version.h ###
-
+IF (BUILDING_FROM_VCS)
 SET (GNC_VERSION_H_IN
 "/* Autogenerated. Do not change. */
 #ifndef GNC_VERSION_H
@@ -58,6 +58,17 @@ SET (GNC_VERSION_H_IN
 #include \"gnc-vcs-info.h\"
 #endif
 ")
+ELSE()
+SET (GNC_VERSION_H_IN
+"/* Autogenerated. Do not change. */
+#ifndef GNC_VERSION_H
+#define GNC_VERSION_H
+
+#undef GNC_VCS
+#include \"gnc-vcs-info.h\"
+#endif
+")
+ENDIF(BUILDING_FROM_VCS)
 
 STRING(CONFIGURE ${GNC_VERSION_H_IN} GNC_VERSION_H_CONTENT)
 FILE (WRITE ${CMAKE_CURRENT_BINARY_DIR}/gnc-version.h ${GNC_VERSION_H_CONTENT})
